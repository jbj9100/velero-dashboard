apiVersion: v1
kind: ServiceAccount
metadata:
  name: velero-dashboard-sa
  namespace: velero
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: velero-dashboard-role
rules:
  # Velero Resources Access
  - apiGroups: ["velero.io"]
    resources: ["backups", "restores", "schedules", "downloadrequests", "deletebackuprequests", "serverstatusrequests", "backupstoragelocations", "volumesnapshotlocations"]
    verbs: ["get", "list", "watch", "create", "delete", "patch", "update"]
  # K8s Core Resources (for listing namespaces, pvcs, etc. if needed)
  - apiGroups: [""]
    resources: ["namespaces", "pods", "persistentvolumeclaims", "configmaps", "secrets"]
    verbs: ["get", "list", "watch"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: velero-dashboard-binding
subjects:
  - kind: ServiceAccount
    name: velero-dashboard-sa
    namespace: velero
roleRef:
  kind: ClusterRole
  name: velero-dashboard-role
  apiGroup: rbac.authorization.k8s.io
